<html>
    <head> 
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="OF.css">
        <link rel="icon" href="images/LOGO.jpg" type="image/png">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@100..900&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Kumbh+Sans:wght@100..900&display=swap" rel="stylesheet">
        <title>Order - Samgyeop Grill Box</title>
    </head>
    <body>
        <div class="top">
            <div class="menu" id="menu"><img src="menu_bar.png" alt="MENU ICON" id="menu"></div>
            <div class="logo"><a href="LandingPage.html"><img src="images/LOGO.jpg" alt="SAMG LOGO"></a></div>
            <div class="title"><h1>Samgyeop Grill Box - Cebu</h1></div>
            <div class="tagline"><p>Grill anytime and anywhere your favorite authentic korean samgyeopsal.</p></div>
        </div>

        <div class="navBar">
            <nav id="navBar" style="opacity: 0;">
                <div class="x" id="x"><img src="images/X.png" alt="X-ICON" id="x"></div>

                <div class="menu"><a href="RegularMenu.html">MENU & FAQs</a></div>
                <div class="offers"><a href="SpecialOffers.html">SPECIAL OFFERS</a></div>
                <div class="order"><a href="OrderPage.html">HOW TO ORDER</a></div>
                <div class="about"><a href="AboutUs.html">ABOUT US</a></div>
                <div class="feedback"><a href="Feedback.html">FEEDBACKS</a></div>
                <div class="reseller"><a href="Reseller.html">BECOME A RESELLER</a></div>
            </nav>
        </div>

        <!--<div class="code-applied" id="code-applied" style="opacity: 0; display: none; transition: opacity 0.5s ease;">
            <h2 id="coded">CODE APPLIED!</h2>
            <button onclick="showApplied()" id="but">OK</button>
        </div>

        <div class="code-denied" id="code-denied" style="opacity: 0; display: none; transition: opacity 0.5s ease;">
            <h2 id="deny">CODE DENIED!</h2>
            <button onclick="showDenied()" id="b">OK</button>
        </div> -->

        <img src="images/back_button.png" id="goBackButton">
        <div class="parent-container">
             <div class="menu-container">
                <h1 class="menu-title">Main Menu</h1>  

                <div class="white-container">
                    <div class="reg-container">
                    <h2 class="sub-title">REGULAR BOX<br>₱269.00</h2> <h2 id="reg-value">0</h2> <img src="images/add.png" id="add">   <img src="images/minus.png" id="remove">
                    </div>

                    <div class="regular-blank" id="regular-blank"></div>

                    <div class="prem-container">
                    <h2 class="sub-prem">PREMIUM BOX<br>₱379.00</h2> <h2 id="prem-value">0</h2> <img src="images/add.png" id="add_2">   <img src="images/minus.png" id="remove_2">
                    </div>

                    <div class="premium-blank" id="premium-blank"></div>
                </div>


            </div>

            <div class="add-ons" style="overflow-y: hidden;">
                <h1 class="addons-title">Add Ons</h1>
                <table class="addon-table">
                    <thead>
                        <tr>
                            <th>Add On</th>
                            <th>Price</th>
                            <th>Quantity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Kimchi 30g</td>
                            <td>₱30.00</td>
                            <td><input type="number" id="kimchi" name="kimchi"></td>
                        </tr>
                        <tr>
                            <td>Lettuce 30g</td>
                            <td>₱30.00</td>
                            <td><input type="number" id="lettuce" name="lettuce"></td>
                        </tr>
                        <tr>
                            <td>Potato Marble 2 pcs</td>
                            <td>₱30.00</td>
                            <td><input type="number" id="potato" name="potato"></td>
                        </tr>
                        <tr>
                            <td>Fishcake 30g</td>
                            <td>₱30.00</td>
                            <td><input type="number" id="fishcake" name="fishcake"></td>
                        </tr>
                        <tr>
                            <td>Corn 30g</td>
                            <td>₱30.00</td>
                            <td><input type="number" id="corn" name="corn"></td>
                        </tr>
                        <tr>
                            <td>Nori/Seaweed 30g</td>
                            <td>₱30.00</td>
                            <td><input type="number" id="nori" name="nori"></td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>
        <div class="popup-message" id="popupMessage">
             CODE APPLIED!
        </div>

        <div class="popup" id="popUp">
            INVALID CODE!
        </div>

        <div class="last-row">
                <input type="text" name="promo" id="promo" placeholder="Enter Promo Code" required>
                <button id="apply" onclick="checkPromo()">Apply</button>
        </div>

        <button class="next" onclick="getValues()" id="next">NEXT --></button>

        <script>
            var name = localStorage.getItem('name');
            var email = localStorage.getItem('email');
            var contact_no = localStorage.getItem('contact_no');
            var address = localStorage.getItem('address');
            var distance = localStorage.getItem('distance');

                function checkPromo(){
                var promo_field = document.getElementById('promo').value;
                let promo_1 = 'FAMFEAST3';
                let promo_2 = 'GYSQUAD8';
                let promo_applied = '';

                if(promo_field === promo_1){
                    showApplied();
                    promo_applied = promo_1;
                    localStorage.setItem('promo_field', promo_field);
                }
                else if(promo_field === promo_2){
                    showApplied();
                    promo_applied = promo_2;
                    localStorage.setItem('promo_field', promo_field);
                }
                else{
                    showDenied();
                }
            }
            

            document.getElementById('goBackButton').addEventListener('click', function() {
            window.history.back();
        });

            //REGULAR BOX ADD/REMOVE FUNCTION
            document.addEventListener('DOMContentLoaded', function() {
                const plusButton = document.getElementById('add');
                const minusButton = document.getElementById('remove');
                let boxCount = 0;
                let boxMeatVariants_1 = JSON.parse(localStorage.getItem('boxMeatVariants_1')) || [];

                plusButton.addEventListener('click', function(){
                    boxCount++;
                    updateBoxCount();
                    let regular_blank = document.getElementById('regular-blank');
                    let box = document.createElement('div');
                    box.className = 'box';
                    box.id = 'box' + boxCount;
                    box.innerHTML = 'Box ' + boxCount + ' Meat Variant: ';

                    // Create select element
                    let select = document.createElement('select');
                    let boxIndex_1 = boxCount - 1;
                    if (!Array.isArray(boxMeatVariants_1[boxIndex_1])) {
                        boxMeatVariants_1[boxIndex_1] = [];
                    }

                    let defaultValue = 'Pork Galbi'; // Set your desired default value here
                    
                    let option = document.createElement('option');
                    option.text = 'Pork Galbi';
                    let option2 = document.createElement('option');
                    option2.text = 'Pork Plain'; 
                    select.add(option);
                    select.add(option2);

                    select.addEventListener('change', function() {
                        // Update the meat variant
                        boxMeatVariants_1[boxIndex_1][0] = { meat_variant: this.value };
                        localStorage.setItem('boxMeatVariants_1', JSON.stringify(boxMeatVariants_1));
                        //alert(JSON.stringify(boxMeatVariants_1));
                    });
                    
                    // Set default value
                    boxMeatVariants_1[boxIndex_1][0] = { meat_variant: defaultValue };
                    localStorage.setItem('boxMeatVariants_1', JSON.stringify(boxMeatVariants_1));

                    box.appendChild(select);

                    regular_blank.appendChild(box);
                });

                minusButton.addEventListener('click', function(){
                    if (boxCount > 0) {
                        let regular_blank = document.getElementById('regular-blank');
                        regular_blank.removeChild(regular_blank.lastChild);
                        boxMeatVariants_1.pop();
                        boxCount--;
                        updateBoxCount();
                        localStorage.setItem('boxMeatVariants_1', JSON.stringify(boxMeatVariants_1));
                    }
                });

                function updateBoxCount() {
                                document.getElementById('reg-value').textContent = boxCount;
                            }
            });



            document.addEventListener('DOMContentLoaded', function() {

                //PREMIUM BOX ADD/REMOVE FUNCTION
                const plusButton2 = document.getElementById('add_2');
                const minusButton2 = document.getElementById('remove_2');
                let boxCount_2 = 0;
                let boxMeatVariants = []; // Array to store selected meat variants for each box

                plusButton2.addEventListener('click', function(){
                    boxCount_2++;
                    updateBoxCount_2();

                    let premium_blank = document.getElementById('premium-blank');
                    let box_1 = document.createElement('div');
                    let box_2 = document.createElement('div');
                    box_1.className = 'box_2';
                    box_1.id = 'mv1-box' + boxCount_2;
                    box_2.id = 'mv2-box' + boxCount_2;
                    box_2.className = 'box_3';
                    box_1.innerHTML = 'Box ' + boxCount_2 + ' Meat Variant 1: ';
                    box_2.innerHTML = 'Box ' + boxCount_2 + ' Meat Variant 2: ';

                    // Create select element for Meat Variant 1
                    let select_2 = document.createElement('select');
                    select_2.className = 'select_2';
                    select_2.addEventListener('change', function() {
                        // Store the selected option value for the first meat variant
                        let boxIndex = boxCount_2 - 1; // Capture current value of boxCount_2
                        boxMeatVariants[boxIndex][0].meat_variant1 = this.value;
                        localStorage.setItem('boxMeatVariants', JSON.stringify(boxMeatVariants));
                        //alert(JSON.stringify(boxMeatVariants));
                    });

                    // Create select element for Meat Variant 2
                    let select_3 = document.createElement('select');
                    select_3.className = 'select_3';
                    select_3.addEventListener('change', function() {
                        // Store the selected option value for the second meat variant
                        let boxIndex = boxCount_2 - 1; // Capture current value of boxCount_2
                        boxMeatVariants[boxIndex][1].meat_variant2 = this.value;
                        localStorage.setItem('boxMeatVariants', JSON.stringify(boxMeatVariants));
                        //alert(JSON.stringify(boxMeatVariants));
                    });

                    // Add options for Meat Variant 1
                    let option_1 = document.createElement('option');
                    option_1.text = 'Pork Galbi';
                    let option_2 = document.createElement('option');
                    option_2.text = 'Pork Plain';
                    select_2.add(option_1); 
                    select_2.add(option_2);

                    // Add options for Meat Variant 2
                    let option_3 = document.createElement('option');
                    option_3.text = 'Spicy Pork';
                    let option_4 = document.createElement('option');
                    option_4.text = 'Beef Bulgogi';
                    let option_5 = document.createElement('option');
                    option_5.text = 'Beef Galbi';
                    select_3.add(option_3); 
                    select_3.add(option_4);
                    select_3.add(option_5);

                    // Append selects to boxes
                    box_1.appendChild(select_2);
                    box_2.appendChild(select_3);

                    premium_blank.appendChild(box_1);
                    premium_blank.appendChild(box_2);

                    // Initialize meat variant selections for this box
                    boxMeatVariants.push([{meat_variant1: ''}, {meat_variant2: ''}]); 
                });


                minusButton2.addEventListener('click', function(){
                    if (boxCount_2 > 0) {
                        let premium_blank = document.getElementById('premium-blank');
                        premium_blank.removeChild(premium_blank.lastChild);
                        premium_blank.removeChild(premium_blank.lastChild);
                        boxMeatVariants.pop();
                        boxCount_2--;
                        updateBoxCount_2();
                    }
                });

                function updateBoxCount_2() {
                    document.getElementById('prem-value').textContent = boxCount_2;
                }

            });


            function getValues(){
                var kimchi = document.getElementById('kimchi').value;
                var lettuce = document.getElementById('lettuce').value;
                var potato = document.getElementById('potato').value;
                var fishcake = document.getElementById('fishcake').value;
                var corn = document.getElementById('corn').value;
                var nori = document.getElementById('nori').value;
                var premium_box = document.getElementById('prem-value').textContent;
                var regular_box = document.getElementById('reg-value').textContent;

                localStorage.setItem('name', name);
                localStorage.setItem('email', email);
                localStorage.setItem('contact_no', contact_no);
                localStorage.setItem('address', address);
                localStorage.setItem('distance', distance);
                localStorage.setItem('kimchi', kimchi);
                localStorage.setItem('lettuce', lettuce);
                localStorage.setItem('potato', potato);
                localStorage.setItem('fishcake', fishcake);
                localStorage.setItem('corn', corn);
                localStorage.setItem('nori', nori);
                localStorage.setItem('premium_box', premium_box);
                localStorage.setItem('regular_box', regular_box);

                window.location.href = 'OrderSummary.html';

            }

            function showApplied(){
                /*var code_applied = document.getElementById('code-applied');
                var text = document.getElementById('coded');

                if(code_applied.style.display === 'none'){
                    code_applied.style.opacity = '1';
                    code_applied.style.display = 'block';
                }
                else{
                    code_applied.style.opacity = '0';
                    code_applied.style.display = 'none';
                } */

                var popup = document.getElementById('popupMessage');
                popup.style.display = 'block';

                // Slide down animation
                setTimeout(function() {
                    popup.style.top = '20px'; // Adjust top position as needed

                }, 100);
                
                // Hide the pop-up after 3 seconds (adjust as needed)
                setTimeout(function() {
                    popup.style.display = 'none';
                    popup.style.top = '0'; // Reset top position
                }, 3000);
            }

            function showDenied(){
                /*var code_denied = document.getElementById('code-denied');
                var txt = document.getElementById('deny');
                var b = document.getElementById('b');

                if(code_denied.style.display === 'none'){
                    code_denied.style.opacity = '1';
                    code_denied.style.display = 'block';
                    txt.textContent = 'INVALID CODE!';
                    txt.style.color = '#FF0000';
                    b.style.backgroundColor = '#FF0000';

                }
                else{
                    code_denied.style.opacity = '0';
                    code_denied.style.display = 'none';
                }*/

                var popup = document.getElementById('popUp');
                popup.style.display = 'block';

                // Slide down animation
                setTimeout(function() {
                    popup.style.top = '20px'; // Adjust top position as needed

                }, 100);
                
                // Hide the pop-up after 3 seconds (adjust as needed)
                setTimeout(function() {
                    popup.style.display = 'none';
                    popup.style.top = '0'; // Reset top position
                }, 3000);
            }

            document.addEventListener('DOMContentLoaded', function() {
                const toggleButton = document.getElementById('x');
                const toggleButton_2 = document.getElementById('menu');
                const mainNav = document.getElementById('navBar');
                mainNav.style.pointerEvents = 'none';
    
                toggleButton.addEventListener('click', function() {
                    mainNav.style.opacity = '0';
                    mainNav.style.zIndex = '0';
                    mainNav.style.pointerEvents = 'none';
                    mainNav.style.transition = '0.25s ease';
                });
    
                toggleButton_2.addEventListener('click', function() {
                    if (mainNav.style.opacity === '0') {
                        mainNav.style.opacity = '1';
                        mainNav.style.pointerEvents = 'visible';
                        mainNav.style.zIndex = '99999';
                        mainNav.style.transition = '0.25s ease';
                    } else {
                        mainNav.style.opacity = '0';
                        mainNav.style.zIndex = '0';
                        mainNav.style.pointerEvents = 'none';
                        mainNav.style.transition = '0.25s ease';
                    }
                });
            });
        </script>
    </body>
</html>
